node ('master'){
    deleteDir()
    try {
            stage('Checkout repository.') {
                checkout poll: false, scm: [$class: 'GitSCM', branches: [[name: 'refs/heads/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/uladzimiramelyanovich/curl.git']]]
            }
    }   finally {
            def myDataMap = [:]
            myDataMap['test1'] = 1
            myDataMap['test2'] = 2
            myDataMap['test3'] = 3
            myDataMap['test4'] = 4
            println(myDataMap)
            def myCustomDataMap = [:]
            myCustomDataMap['series1'] = myDataMap
            println(myCustomDataMap)
            commonPipelineEnvironment.setInfluxCustomDataProperty('myProperty', 2019)
            influxDbPublisher(target: 'Jenkins', customPrefix: 'myPrefix', customData: ['build_result' : 'success'], customDataMap: myCustomDataMap)
        }
}
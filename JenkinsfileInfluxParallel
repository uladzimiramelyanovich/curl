@Library('my-shared-library') _
node ('master'){

    deleteDir()

parallel (
'run1': {
        parallelScript.wrappedStage('Checkout repository. run1',
            {
            checkout poll: false, scm: [$class: 'GitSCM', branches: [[name: 'refs/heads/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/uladzimiramelyanovich/curl.git']]]
            }
        )

        parallelScript.wrappedStage('Sonarqube analysis. run1',
            {
            // requires Sonarqube Scanner 2.8+
            def scannerHome = tool 'Sonarqube Scanner 3.3.0.1492';
                withSonarQubeEnv('sonarqube') {
                    sh "${scannerHome}/bin/sonar-scanner -Dproject.settings=sonarqube/sonar-curl-project.properties"
                }
            }
        )            
    } //run1
) //parallel       
}